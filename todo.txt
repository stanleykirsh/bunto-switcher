1. Обработка print(q) выдает print9q0

2. Кастомный переключатель и получатель раскладки
# получить раскладку
# gsettings get org.gnome.desktop.input-sources mru-sources
# [('xkb', 'se'), ('xkb', 'us')]
# gsettings get org.gnome.desktop.input-sources mru-sources | sed -r "s/\S*\s'([^']+).*/\1/"

# установить раскладку
# gsettings set org.gnome.desktop.input-sources sources "[('xkb', 'us')]"
# gsettings set org.gnome.desktop.input-sources sources "[('xkb', 'ru')]"
# gsettings set org.gnome.desktop.input-sources sources "[('xkb', 'us'), ('xkb', 'ru')]"
# gsettings set org.gnome.desktop.input-sources sources "[('xkb', 'ru'), ('xkb', 'us')]"

# Если посмотреть что именно происходит на переключении раскладок по хоткею, то там:
# gsettings monitor org.gnome.desktop.input-sources
# mru-sources: [('xkb', 'ru'), ('xkb', 'us')]
# mru-sources: [('xkb', 'us'), ('xkb', 'ru')]
# mru-sources: [('xkb', 'ru'), ('xkb', 'us')]
# mru-sources: [('xkb', 'us'), ('xkb', 'ru')]

3. Асинхронное переключение. 
Пока происходит переключение раскладки могут быть нажаты другие буквенные клавиши.
Когда переключение завершится, то печатать все что накопилось в буфере пока выполнялось переключение.